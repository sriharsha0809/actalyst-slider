/* stylelint-disable at-rule-no-unknown */
@tailwind base;
@tailwind components;
@tailwind utilities;
/* stylelint-enable at-rule-no-unknown */

html, body, #root { height: 100%; }
html, body { margin: 0; padding: 0; }
body { background-color: #ebebeb; }

:root {
  --canvas-bg: #ffffff;
}

/***** Dark Theme Font Dropdown Styles *****/
.dark-theme-dropdown {
  background-color: rgba(0, 0, 0, 0.8) !important;
  color: #ffffff !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
}

.dark-theme-dropdown option {
  background-color: #000000 !important;
  color: #ffffff !important;
  padding: 8px 12px !important;
  border: none !important;
}

.dark-theme-dropdown option:hover,
.dark-theme-dropdown option:focus {
  background-color: #1a1a1a !important;
  color: #ffffff !important;
}

.light-theme-dropdown {
  background-color: rgba(255, 255, 255, 0.9) !important;
  color: #000000 !important;
}

.light-theme-dropdown option {
  background-color: #ffffff !important;
  color: #000000 !important;
  padding: 8px 12px !important;
}

.mini-toolbar-dropdown {
  background-color: rgba(0, 0, 0, 0.95) !important;
  color: #ffffff !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
}

.mini-toolbar-dropdown option {
  background-color: #000000 !important;
  color: #ffffff !important;
  padding: 8px 12px !important;
  border: none !important;
}

.mini-toolbar-dropdown option:hover,
.mini-toolbar-dropdown option:focus {
  background-color: #1a1a1a !important;
  color: #ffffff !important;
}

/***** Shining Animation for Present Button *****/
@keyframes shine {
  0% {
    transform: translateX(-100%) rotate(45deg);
  }
  100% {
    transform: translateX(300%) rotate(45deg);
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

.shine-button {
  position: relative;
  overflow: hidden;
  background: linear-gradient(45deg, 
    rgba(255, 255, 255, 0.1), 
    rgba(255, 255, 255, 0.3), 
    rgba(255, 255, 255, 0.1)
  );
  background-size: 200% 100%;
  animation: shimmer 2s ease-in-out infinite;
}

.shine-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.4),
    rgba(255, 255, 255, 0.6),
    rgba(255, 255, 255, 0.4),
    transparent
  );
  animation: shine 3s ease-in-out infinite;
  z-index: 1;
}

.shine-button:hover {
  animation-duration: 1.5s;
}

.shine-button:hover::before {
  animation-duration: 2s;
}

/***** Pulse Animation for Extra Appeal *****/
@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
  }
  50% {
    box-shadow: 0 0 30px rgba(59, 130, 246, 0.6);
  }
}

.pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

/***** Background tools dropdown animation *****/
@keyframes bg-dropdown-up {
  0% {
    opacity: 0;
    transform: translateY(8px) scaleY(0.96);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scaleY(1);
  }
}

@keyframes bg-dropdown-down {
  0% {
    opacity: 1;
    transform: translateY(0) scaleY(1);
  }
  100% {
    opacity: 0;
    transform: translateY(8px) scaleY(0.96);
  }
}

.bg-dropdown-menu-open {
  animation: bg-dropdown-up 150ms ease-out;
  transform-origin: bottom center;
}

.bg-dropdown-menu-close {
  animation: bg-dropdown-down 150ms ease-in;
  transform-origin: bottom center;
}

/***** Responsive Breakpoints *****/
/* Custom responsive styles for screens under 1425px */
@media (max-width: 1425px) {
  .responsive-toolbar {
    gap: 0.25rem; /* Reduced from gap-2 (0.5rem) */
    padding-left: 0.125rem;
    padding-right: 0.125rem;
    padding-top: 0.25rem;
    padding-bottom: 0.25rem;
  }
  
  .responsive-toolbar-button {
    padding-left: 0.25rem; /* Reduced padding */
    padding-right: 0.25rem;
    padding-top: 0.125rem;
    padding-bottom: 0.125rem;
    font-size: 0.6875rem; /* Smaller font size */
    min-height: 1.75rem; /* Ensure buttons don't get too small */
  }
  
  .responsive-toolbar-text {
    font-size: 0.625rem; /* Reduced from text-xs (0.75rem) */
    line-height: 1.2;
  }
  
  .responsive-toolbar-gap {
    gap: 0.125rem; /* Minimal gaps between elements */
  }
  
  .responsive-alignment-section {
    gap: 0.125rem; /* Reduced gap in alignment sections */
  }
  
  .responsive-alignment-text {
    font-size: 0.5rem; /* Smaller text for alignment labels */
    line-height: 1.1;
  }
  
  .responsive-sidebar-left {
    width: 10rem !important; /* Force reduced left sidebar width */
  }
  
  /* Force responsive grid layout */
  .grid.grid-cols-1.lg\:grid-cols-\[1fr_280px\] {
    grid-template-columns: 1fr 220px !important;
    gap: 0.5rem !important;
    padding-left: 0.75rem !important;
    padding-right: 0.75rem !important;
  }
  
  /* Ensure toolbar content stays within bounds */
  .responsive-toolbar > * {
    flex-shrink: 1;
  }
  
  /* Reduce select dropdown width */
  .responsive-toolbar-button[class*="min-w-"] {
    min-width: 80px !important;
  }
}

/* Additional responsive styles for very narrow screens (Design tab) */
@media (max-width: 1030px) {
  /* Design tab specific adjustments */
  .responsive-toolbar {
    flex-wrap: nowrap !important;
    gap: 0.125rem !important;
  }
  
  /* Ensure no wrapping for Design tab elements */
  .responsive-toolbar .flex.items-center {
    flex-wrap: nowrap;
    gap: 0.125rem;
  }
  
  /* Make shape buttons more compact */
  .responsive-toolbar-button {
    padding-left: 0.125rem !important;
    padding-right: 0.125rem !important;
    min-width: auto !important;
  }
  
  /* Hide "+ New Slide" and "+ Text" labels on very narrow screens */
  .responsive-toolbar-button:not([title*="Rectangle"]):not([title*="Circle"]):not([title*="Triangle"]):not([title*="More"]) span {
    display: none;
  }
  
  /* Show only icons for non-shape buttons on narrow screens */
  .responsive-toolbar-button svg {
    margin: 0 !important;
  }
  
  /* Keep shape labels visible but smaller */
  .responsive-toolbar-text {
    font-size: 0.5rem !important;
    line-height: 1 !important;
  }
  /* Re-show labels explicitly marked */
  .responsive-toolbar-button span.keep-default, .responsive-toolbar-button span.show-label { display: inline !important; }
}

/***** Apple-like toolbar interactions *****/
.tool-btn,
.responsive-toolbar-button {
  color: #1c1c1e;
  background-color: transparent;
  border: 1px solid transparent;
  transition: color 200ms ease, background-color 200ms ease, border-color 200ms ease, transform 200ms ease, box-shadow 200ms ease;
}
.tool-btn:hover,
.responsive-toolbar-button:hover {
  background-color: rgba(0, 0, 0, 0.06);
  color: #007aff;
  border-color: rgba(0, 0, 0, 0.12);
  transform: translateY(-1px);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
}
/* Prevent hover border on specific buttons (play, undo, redo, toggle, zoom controls) */
.no-hover-outline:hover {
  border-color: transparent !important;
  border-width: 0 !important;
  box-shadow: none !important;
}
/* Also remove hover background/transform for these buttons */
.no-hover-bg:hover {
  background-color: transparent !important;
  border-color: transparent !important;
  box-shadow: none !important;
  transform: none !important;
}
.tool-btn:active,
.responsive-toolbar-button:active {
  background-color: rgba(0, 0, 0, 0.08);
  border-color: rgba(0, 0, 0, 0.12);
}
.tool-btn.is-active,
.responsive-toolbar-button.is-active {
  background-color: rgba(0, 122, 255, 0.1);
  border-color: #007aff;
  color: #007aff;
}
.tool-btn:disabled,
.responsive-toolbar-button:disabled {
  opacity: 0.5;
  pointer-events: none;
}

/***** 3D slide thumbnails *****/
.thumb-3d-wrap {
  perspective: 800px;
}
.thumb-3d {
  transform: rotateX(2deg);
  will-change: transform, box-shadow;
  box-shadow: 0 2px 4px rgba(0,0,0,0.08), 0 6px 12px rgba(0,0,0,0.10);
}
/* Selected gets a slightly stronger, persistent 3D effect */
.thumb-3d.is-selected {
  transform: rotateX(3deg) translateZ(2px) translateY(-0.5px);
  box-shadow: 0 3px 6px rgba(0,0,0,0.12), 0 10px 18px rgba(0,0,0,0.12);
}
.group:hover .thumb-3d {
  transform: rotateX(3.5deg) translateY(-1px);
  box-shadow: 0 3px 6px rgba(0,0,0,0.10), 0 10px 18px rgba(0,0,0,0.12);
}
/* Selected + hover: slight extra lift */
.group:hover .thumb-3d.is-selected {
  transform: rotateX(4deg) translateZ(3px) translateY(-1px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.14), 0 12px 22px rgba(0,0,0,0.14);
}

/***** Rich Text Content Formatting *****/
.rich-text-content {
  display: inline-block;
  width: 100%;
}

.rich-text-content b,
.rich-text-content strong {
  font-weight: bold !important;
}

.rich-text-content i,
.rich-text-content em {
  font-style: italic !important;
}

.rich-text-content u {
  text-decoration: underline !important;
}

.rich-text-content span {
  /* Preserve inline formatting */
}

.rich-text-content span[style*="font-weight"] {
  /* Force font-weight styles to be preserved */
}

.rich-text-content span[style*="font-style"] {
  /* Force font-style styles to be preserved */
}

.rich-text-content span[style*="text-decoration"] {
  /* Force text-decoration styles to be preserved */
}

/***** Text Editor Alignment Persistence *****/
[contenteditable="true"] {
  /* Ensure text alignment is inherited by all child elements during editing */
  direction: ltr !important; /* Force left-to-right text direction */
  writing-mode: horizontal-tb !important; /* Horizontal top-to-bottom writing */
  unicode-bidi: normal !important; /* Normal Unicode bidirectional algorithm */
}

[contenteditable="true"][style*="text-align: left"] * {
  text-align: left !important;
}

[contenteditable="true"][style*="text-align: center"] * {
  text-align: center !important;
}

[contenteditable="true"][style*="text-align: right"] * {
  text-align: right !important;
}

[contenteditable="true"][style*="text-align: justify"] * {
  text-align: justify !important;
}

/* Force alignment inheritance for specific formatting elements */
[contenteditable="true"] b,
[contenteditable="true"] strong,
[contenteditable="true"] i,
[contenteditable="true"] em,
[contenteditable="true"] u,
[contenteditable="true"] span {
  text-align: inherit !important;
  display: inline !important;
}

/* Prevent div and p elements from creating unwanted line breaks */
[contenteditable="true"] div,
[contenteditable="true"] p {
  display: inline !important;
  margin: 0 !important;
  padding: 0 !important;
  text-align: inherit !important;
}

/* Ensure br elements work properly for intentional line breaks */
[contenteditable="true"] br {
  display: block !important;
  margin: 0 !important;
  padding: 0 !important;
  line-height: normal !important;
}

/* Prevent unwanted margins and padding on formatting elements */
[contenteditable="true"] * {
  margin: 0 !important;
  padding: 0 !important;
}

/* Ensure lists render markers inside the editor box (not clipped) */

/* General Text Direction Rules */
/* Ensure all text elements have proper left-to-right direction */
.rich-text-content,
[contenteditable],
textarea,
input[type="text"],
.text-element {
  direction: ltr !important;
  writing-mode: horizontal-tb !important;
  unicode-bidi: normal !important;
}

/* Ensure lists render markers inside the editor box (not clipped) */
[contenteditable="true"] ul,
[contenteditable="true"] ol {
  display: block !important;
  list-style-position: inside !important;
  padding-inline-start: 1.25em !important; /* room for markers */
  margin: 0 !important;
}
[contenteditable="true"] li {
  display: list-item !important;
}

/* Force LTR for all text containers */
.slide-canvas .text-box,
.slide-canvas [contenteditable] {
  direction: ltr !important;
  text-align: left; /* Default alignment */
}

/* Disable text selection globally while dragging/resizing */
.no-user-select, .no-user-select * {
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
}
/* But always allow typing/selecting inside active editors */
.no-user-select textarea,
.no-user-select [contenteditable="true"] {
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
  user-select: text !important;
}

/***** Utilities *****/
/* Toolbar uniform sizing */
.toolbar button:not(.keep-default):not(.active-capable), .toolbar select:not(.keep-default), .toolbar label:not(.keep-default), .toolbar input[type="number"]:not(.keep-default), .toolbar .responsive-toolbar-button:not(.keep-default):not(.active-capable) {
  height: 32px !important;
  min-height: 32px !important;
  line-height: 32px !important;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  padding: 0 6px !important;
  text-align: center;
}
/* Interaction states */
.toolbar button, .toolbar .responsive-toolbar-button {
  cursor: pointer !important;
}

/* Presentation animations */

/* CSS-only chevron icons for dropdown toggles */

/* Rows/Columns dropdown: block options with staged enter animation */
.ops-panel .ops-item {
  display: inline-flex;
  opacity: 0;
  transform: translateY(150%);
  transition-property: transform, opacity !important;
  transition-duration: 2000ms !important;
  transition-timing-function: ease !important;
  will-change: transform, opacity;
}
.ops-panel.ops-open .ops-item {
  opacity: 1;
  transform: translateY(0%);
}
/* Stagger timing for first 8 items */
.ops-panel.ops-open .ops-list > .ops-item:nth-child(1) { transition-delay: 0ms; }
.ops-panel.ops-open .ops-list > .ops-item:nth-child(2) { transition-delay: 50ms; }
.ops-panel.ops-open .ops-list > .ops-item:nth-child(3) { transition-delay: 100ms; }
.ops-panel.ops-open .ops-list > .ops-item:nth-child(4) { transition-delay: 150ms; }
.ops-panel.ops-open .ops-list > .ops-item:nth-child(5) { transition-delay: 200ms; }
.ops-panel.ops-open .ops-list > .ops-item:nth-child(6) { transition-delay: 250ms; }
.ops-panel.ops-open .ops-list > .ops-item:nth-child(7) { transition-delay: 300ms; }
.ops-panel.ops-open .ops-list > .ops-item:nth-child(8) { transition-delay: 350ms; }

/* Stack variant: allow block-level containers and column layout per item */
.ops-panel.ops-stack .ops-item { display: block; }
.ops-panel.ops-stack .ops-item.ops-flexcol { display: flex; flex-direction: column; gap: 0.5rem; }
.gg-chevron-up {
  box-sizing: border-box;
  position: relative;
  transform: scale(var(--ggs, 1));
  width: 22px;
  height: 22px;
  border: 2px solid transparent;
  border-radius: 100px;
}
.gg-chevron-up::after {
  content: "";
  display: block;
  box-sizing: border-box;
  position: absolute;
  width: 10px;
  height: 10px;
  border-top: 2px solid;
  border-right: 2px solid;
  transform: rotate(-45deg);
  left: 4px;
  bottom: 2px;
}

.gg-chevron-down {
  box-sizing: border-box;
  position: relative;
  transform: scale(var(--ggs, 1));
  width: 22px;
  height: 22px;
  border: 2px solid transparent;
  border-radius: 100px;
}

.gg-chevron-down::after {
  content: "";
  display: block;
  box-sizing: border-box;
  position: absolute;
  width: 10px;
  height: 10px;
  border-bottom: 2px solid;
  border-right: 2px solid;
  transform: rotate(45deg);
  left: 4px;
  top: 2px;
}
@keyframes slide-in-next {
  from { transform: translateX(24px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
@keyframes slide-in-prev {
  from { transform: translateX(-24px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
.slide-anim-next {
  animation: slide-in-next 300ms ease both;
}
.slide-anim-prev {
  animation: slide-in-prev 300ms ease both;
}

@keyframes keynote-pop {
  0% { transform: translateY(12px) scale(0.98); opacity: 0; }
  60% { transform: translateY(0) scale(1.02); opacity: 1; }
  100% { transform: translateY(0) scale(1); opacity: 1; }
}
.keynote-pop {
  animation: keynote-pop 500ms cubic-bezier(.2,.7,.2,1) both;
}

/* Sidebar thumbnail pop-in (Apple Keynote style) */
@keyframes thumb-pop {
  from { opacity: 0.66; transform: translateY(-8px) scale(0.88); }
  to   { opacity: 1;    transform: translateY(0)    scale(1); }
}
.thumb-pop-in {
  animation: thumb-pop 180ms cubic-bezier(.2,.7,.2,1) both;
}

/* Duplication-specific pop-in (downward offset) */
@keyframes thumb-dup {
  from { opacity: 0.5; transform: translateY(8px) scale(0.88); }
  to   { opacity: 1;   transform: translateY(0) scale(1); }
}
.thumb-dup-in {
  animation: thumb-dup 190ms cubic-bezier(.2,.7,.2,1) both;
}

/* Brief source pulse/glow when duplicating */
@keyframes thumb-source-pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}
.thumb-source-glow {
  animation: thumb-source-pulse 150ms ease-in-out;
}

/* Prevent scroll anchoring and scroll chaining in right sidebar */
.sidebar-scroll {
  overflow-anchor: none;
  overscroll-behavior: contain;
}

/* Image inspector hover effects */
.image-inspector button,
.image-inspector label,
.image-inspector input[type="range"] {
  transition: background-color 150ms ease, box-shadow 150ms ease, transform 150ms ease;
}

.image-inspector button:hover,
.image-inspector label:hover {
  background-color: rgba(15,23,42,0.04);
  box-shadow: 0 2px 6px rgba(15,23,42,0.06);
  transform: translateY(-0.5px);
}

/* Custom circular color inputs (fully filled circles) */
input[type="color"].color-circle {
  -webkit-appearance: none;
  appearance: none;
  padding: 0;
  border-radius: 9999px;
  overflow: hidden;
}
input[type="color"].color-circle::-webkit-color-swatch-wrapper {
  padding: 0;
}
input[type="color"].color-circle::-webkit-color-swatch {
  border: none;
  border-radius: 9999px;
}

/* Sidebar shimmer skeletons */
.skeleton-line,
.skeleton-rect {
  position: relative;
  overflow: hidden;
  background: linear-gradient(90deg, rgba(0,0,0,0.08) 25%, rgba(0,0,0,0.14) 37%, rgba(0,0,0,0.08) 63%);
  background-size: 400% 100%;
  animation: shimmer 1.2s ease-in-out infinite;
}
.skeleton-line { border-radius: 4px; }
.skeleton-rect { border-radius: 8px; }

/* Dropdown panel animation + glassmorphism */
.dropdown-panel {
  animation: dropdown-enter 180ms ease both;
  transform-origin: top right;
  background: rgba(255,255,255,0.10) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
  border: 1px solid rgba(255,255,255,0.18) !important;
  box-shadow: 0 8px 28px rgba(17,25,40,0.25) !important;
}
@keyframes dropdown-enter {
  from { opacity: 0; transform: translateY(6px) scale(0.97); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

/* Active state for dropdown trigger buttons */
.drop-btn { transition: box-shadow 150ms ease, transform 150ms ease, background-color 150ms ease, border-color 150ms ease; }
.drop-btn-active {
  background: rgba(255,255,255,0.9) !important;
  border-color: rgba(0,0,0,0.25) !important;
  box-shadow: 0 6px 18px rgba(17,25,40,0.18) !important;
}

/* Fluid checkbox + dropdown interactions (top-to-bottom feel) */
@keyframes checkbox-fluid-sweep {
  0% { transform: translateY(-3px); opacity: 0.4; }
  100% { transform: translateY(0); opacity: 1; }
}

/* Apply to toolbar + right inspector checkboxes */
.toolbar input[type="checkbox"],
.responsive-sidebar-right input[type="checkbox"] {
  transition: box-shadow 160ms ease, transform 160ms ease, background-color 160ms ease;
}

.toolbar input[type="checkbox"]:checked,
.responsive-sidebar-right input[type="checkbox"]:checked {
  animation: checkbox-fluid-sweep 180ms cubic-bezier(.2,.7,.2,1) both;
  box-shadow: 0 2px 6px rgba(15,23,42,0.18);
}


.toolbar button:hover, .toolbar .responsive-toolbar-button:hover,
.toolbar button:focus-visible, .toolbar .responsive-toolbar-button:focus-visible {
  background: rgba(219,234,254,0.95) !important; /* light blue */
  color: #1d4ed8 !important; /* blue icon/text */
  border: 1px solid #2563eb !important; /* blue outline */
  box-shadow: 0 0 0 1px rgba(37,99,235,0.7), 0 2px 6px rgba(37,99,235,0.35);
  border-radius: 0.5rem;
}
/* Exceptions and overrides */
.toolbar .force-black { color: #000 !important; fill: #000 !important; stroke: #000 !important; }
.toolbar .force-border { border: 1px solid #000 !important; border-radius: 0.5rem !important; }
/* Normalize icon sizes */
.toolbar button svg, .toolbar label svg {
  width: 18px !important;
  height: 18px !important;
  flex-shrink: 0;
}
/* Compact toolbar container padding */
.toolbar { padding-top: 2px !important; padding-bottom: 2px !important; }

/* Ensure Insert icon buttons show labels beneath icons */
.toolbar .responsive-toolbar-button.w-16,
.toolbar .responsive-toolbar-button.w-20 {
  height: auto !important;
  min-height: 48px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  padding: 6px 8px !important;
  gap: 4px !important;
  flex-direction: column !important;
  background: transparent !important;
  border: none !important;
}
/* Always show spans under these buttons */
.toolbar .responsive-toolbar-button.w-16 span,
.toolbar .responsive-toolbar-button.w-20 span { display: inline !important; }

.tool-btn { background: transparent !important; border: none !important; box-shadow: none !important; }
/* Smooth zoom/hover/active animation */
.toolbar .tool-btn { transition: transform 150ms ease, background-color 150ms ease, color 150ms ease; transform: scale(1); }
.toolbar .tool-btn:hover { transform: scale(1.05); font-weight: 700 !important; }
.toolbar .tool-btn.tool-active, .toolbar button.tool-active { transform: scale(1.05); font-weight: 700 !important; }

/* Transparent base for zoomable buttons */
.toolbar .anim-zoom { background: transparent !important; transition: transform 150ms ease, color 150ms ease; transform: scale(1); }
.toolbar .anim-zoom:hover, .toolbar .anim-zoom.is-active, .toolbar .is-active.anim-zoom { transform: scale(1.06); font-weight: 700 !important; }

/* Unify active bg with +Text/+New Slide for all buttons except font family and font size */
.toolbar button.anim-zoom.is-active,
.toolbar .responsive-toolbar-button.anim-zoom.is-active,
.toolbar label.anim-zoom.is-active,
.toolbar .tool-btn.tool-active {
  background: #4A7FA7 !important;
  color: #ffffff !important;
}
@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
  }
  .scrollbar-thin::-webkit-scrollbar { height: 8px; width: 8px; }
  .scrollbar-thin::-webkit-scrollbar-thumb { background: theme('colors.gray.300'); border-radius: 9999px; }
  .scrollbar-thin::-webkit-scrollbar-track { background: transparent; }
}

/***** React Spreadsheet Custom Styling - Keynote Inspired *****/
.keynote-spreadsheet {
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', system-ui, sans-serif;
}

.keynote-spreadsheet .Spreadsheet {
  width: 100%;
  overflow: visible;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.08);
}

.keynote-spreadsheet .Spreadsheet table {
  border-collapse: separate;
  border-spacing: 0;
  width: 100%;
  table-layout: fixed;
  background: white;
  border-radius: 8px;
  overflow: hidden;
}

/* Base cell styling */
.keynote-spreadsheet .Spreadsheet td {
  border-right: 1px solid #e0e0e0;
  border-bottom: 1px solid #e0e0e0;
  padding: 10px 12px;
  min-width: 100px;
  height: 40px;
  background: white;
  position: relative;
  transition: all 0.15s ease;
  font-size: 13px;
  color: #1f2937;
  text-align: center;
}

/* Remove borders on outer edges for clean look */
.keynote-spreadsheet .Spreadsheet tr:last-child td {
  border-bottom: none;
}

.keynote-spreadsheet .Spreadsheet td:last-child {
  border-right: none;
}

/* Hover effect on cells */
.keynote-spreadsheet .Spreadsheet td:hover {
  background: #f8fafc;
  box-shadow: 0 2px 4px rgba(0,0,0,0.04);
  transform: translateY(-1px);
}

/* Focus/Active cell with glowing border */
.keynote-spreadsheet .Spreadsheet td:focus,
.keynote-spreadsheet .Spreadsheet td:focus-within {
  outline: none;
  background: white;
  box-shadow: 0 0 0 2px #3b82f6, 0 2px 8px rgba(59,130,246,0.2);
  z-index: 10;
  transform: translateY(0);
}

/* Input styling */
.keynote-spreadsheet .Spreadsheet input,
.keynote-spreadsheet .Spreadsheet textarea {
  width: 100%;
  height: 100%;
  border: none;
  outline: none;
  background: transparent;
  padding: 0;
  font-size: 13px;
  font-family: inherit;
  color: #1f2937;
  text-align: inherit;
}

/* Header cells - first row and first column */
.keynote-spreadsheet .Spreadsheet tr:first-child td {
  background: linear-gradient(180deg, #f9fafb 0%, #f3f4f6 100%);
  font-weight: 600;
  color: #374151;
  border-bottom: 2px solid #d1d5db;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

.keynote-spreadsheet .Spreadsheet td:first-child {
  background: linear-gradient(90deg, #f9fafb 0%, #f3f4f6 100%);
  font-weight: 600;
  color: #374151;
  border-right: 2px solid #d1d5db;
  text-align: left;
  padding-left: 16px;
}

/* Top-left corner cell */
.keynote-spreadsheet .Spreadsheet tr:first-child td:first-child {
  background: #e5e7eb;
  border-right: 2px solid #d1d5db;
  border-bottom: 2px solid #d1d5db;
}

/* Data cells - override header styles when not in header */
.keynote-spreadsheet .Spreadsheet tr:not(:first-child) td:not(:first-child) {
  background: white;
  font-weight: 400;
}

/* Selected cell */
.keynote-spreadsheet .Spreadsheet .Spreadsheet__cell--selected {
  background: #dbeafe !important;
  border-color: #3b82f6;
}

/* Active/editing cell with pulsing border */
.keynote-spreadsheet .Spreadsheet .Spreadsheet__cell--active {
  background: white !important;
  box-shadow: 0 0 0 2px #3b82f6, 0 0 12px rgba(59,130,246,0.3);
  animation: pulse-border 2s ease-in-out infinite;
}

@keyframes pulse-border {
  0%, 100% {
    box-shadow: 0 0 0 2px #3b82f6, 0 0 12px rgba(59,130,246,0.3);
  }
  50% {
    box-shadow: 0 0 0 2px #3b82f6, 0 0 20px rgba(59,130,246,0.5);
  }
}

/* Data viewer */
.keynote-spreadsheet .Spreadsheet__data-viewer {
  padding: 0;
  min-height: 20px;
  width: 100%;
  cursor: cell;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Invalid cells with red border */
.keynote-spreadsheet .Spreadsheet td.invalid {
  border: 2px solid #ef4444;
  background: #fef2f2;
}

/* Smooth transitions for all interactions */
.keynote-spreadsheet .Spreadsheet td,
.keynote-spreadsheet .Spreadsheet input {
  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
}

/* First row rounded corners */
.keynote-spreadsheet .Spreadsheet tr:first-child td:first-child {
  border-top-left-radius: 8px;
}

.keynote-spreadsheet .Spreadsheet tr:first-child td:last-child {
  border-top-right-radius: 8px;
}

/* Last row rounded corners */
.keynote-spreadsheet .Spreadsheet tr:last-child td:first-child {
  border-bottom-left-radius: 8px;
}

.keynote-spreadsheet .Spreadsheet tr:last-child td:last-child {
  border-bottom-right-radius: 8px;
}

/***** Custom Keynote Grid Styling *****/
.keynote-grid-custom table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.keynote-grid-custom td {
  border: 1px solid #e0e0e0;
  padding: 0;
  min-width: 100px;
  height: 44px;
  background: white;
  cursor: pointer;
  transition: all 0.15s ease;
  position: relative;
}

.keynote-grid-custom td:hover:not(.corner-cell) {
  background: #f8fafc;
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
  transform: translateY(-1px);
}

.keynote-grid-custom td.corner-cell {
  background: #e5e7eb;
  cursor: default;
  pointer-events: none;
}

.keynote-grid-custom td.header-cell {
  background: linear-gradient(180deg, #f9fafb 0%, #f3f4f6 100%);
  font-weight: 600;
  color: #374151;
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 0.025em;
}

.keynote-grid-custom td.data-cell {
  text-align: center;
  font-size: 14px;
  color: #1f2937;
  font-weight: 500;
}

.keynote-grid-custom input {
  width: 100%;
  height: 100%;
  border: 2px solid #3b82f6;
  background: white;
  padding: 8px;
  font-size: 14px;
  font-weight: 500;
  box-shadow: 0 0 0 3px rgba(59,130,246,0.1);
  animation: pulse-input 1.5s ease-in-out infinite;
}

@keyframes pulse-input {
  0%, 100% {
    box-shadow: 0 0 0 3px rgba(59,130,246,0.1);
  }
  50% {
    box-shadow: 0 0 0 3px rgba(59,130,246,0.25);
  }
}

.keynote-grid-custom tr:first-child td:first-child {
  border-top-left-radius: 10px;
}

.keynote-grid-custom tr:first-child td:last-child {
  border-top-right-radius: 10px;
}

.keynote-grid-custom tr:last-child td:first-child {
  border-bottom-left-radius: 10px;
}

.keynote-grid-custom tr:last-child td:last-child {
  border-bottom-right-radius: 10px;
}

/***** Apple Keynote Style Grid *****/
.apple-keynote-grid {
  width: 100%;
  height: 100%;
  overflow: auto;
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', sans-serif;
}

.apple-keynote-grid table {
  width: 100%;
  border-collapse: collapse;
  background: white;
}

.apple-keynote-grid td {
  border: 1px solid #d1d5db;
  padding: 0;
  min-width: 100px;
  height: 36px;
  position: relative;
  cursor: pointer;
  transition: background-color 0.1s ease;
}

.apple-keynote-grid td.corner {
  background: #f3f4f6;
  cursor: default;
  pointer-events: none;
  border-right: 1px solid #9ca3af;
  border-bottom: 1px solid #9ca3af;
}

.apple-keynote-grid td.header {
  background: #f9fafb;
  font-weight: 600;
  font-size: 13px;
  color: #374151;
  text-align: center;
  border-bottom: 1px solid #9ca3af;
}

.apple-keynote-grid td.color-cell {
  background: #f9fafb;
  font-weight: 500;
  font-size: 13px;
  color: #374151;
  border-right: 1px solid #9ca3af;
  padding-left: 12px;
}

.apple-keynote-grid td.data {
  background: white;
  text-align: center;
  font-size: 14px;
  color: #1f2937;
}

.apple-keynote-grid td:hover:not(.corner) {
  background: #f0f9ff;
}

.apple-keynote-grid td .cell-content {
  padding: 8px 12px;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.apple-keynote-grid td.header .cell-content,
.apple-keynote-grid td.color-cell .cell-content {
  font-weight: 600;
}

.apple-keynote-grid input {
  width: 100%;
  height: 100%;
  padding: 8px;
  font-size: 14px;
  font-family: inherit;
  text-align: center;
  outline: none;
  background: white;
}
